class DynamicLoad extends HTMLElement{constructor(){super(),this.itemGrid=document.querySelector("#product-grid")||document.querySelector("#collection-grid")||document.querySelector("#article-grid"),this.itemGrid?("collection-grid"===this.itemGrid.id?this.gridType="collection":"product-grid"===this.itemGrid.id?this.gridType="product":"article-grid"===this.itemGrid.id?this.gridType="article":this.gridType="unknown",this.setProperties()):console.error("Grid element not found.")}setProperties(){}appendContent(e,t=!1){t?this.itemGrid.insertAdjacentHTML("afterbegin",e):this.itemGrid.insertAdjacentHTML("beforeend",e)}updateUrl(e){var t=new URL(window.location.href),r=new URLSearchParams(t.search);1===e?r.delete("page"):r.set("page",e),t.search=r.toString(),history.replaceState({},"",t.toString())}updateItemCount(){let e;switch(this.gridType){case"product":e=".product-card";break;case"collection":e=".card-collection";break;case"article":e=".card-article";break;default:e=".card-item"}var t,r=this.itemGrid.querySelectorAll(e).length;"product"===this.gridType&&(t=document.querySelector(".collection-facets__product-count .product-count-of-all"))&&(t.innerText=r)}}if(!customElements.get("dynamic-load-more")){class i extends DynamicLoad{constructor(){super(),this.btnLoadMore=this.querySelector(".js-btn-load-more"),this.observer=null,this.isInfinityScrollActive=!1,this.setProperties(),this.toggleItemsVisibility(),window.addEventListener("shopify:section:load",()=>{this.setProperties(),this.toggleItemsVisibility()}),this.updateItemCount(),this.btnLoadMore.addEventListener("click",e=>{e.preventDefault(),this.loadMoreItems()}),this.checkAndSetupInfinityScroll()}checkAndSetupInfinityScroll(){var e;this.itemGrid&&(e="product"===this.gridType?"ProductGridContainer":"collection"===this.gridType?"CollectionGridContainer":"article"===this.gridType?"ArticleGridContainer":null)&&(e=this.itemGrid.closest("#"+e),console.log("Parent Container:",e,e.classList),e)&&e.classList.contains("infinity-scroll-active")?(console.log("Infinity Scroll is active for:",this.gridType),this.isInfinityScrollActive=!0,this.setupInfinityScroll()):this.isInfinityScrollActive=!1}setupInfinityScroll(){this.btnLoadMore&&(this.observer&&this.observer.disconnect(),this.observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&!this.btnLoadMore.hasAttribute("disabled")&&this.btnLoadMore.click()})},{root:null,rootMargin:"0px",threshold:.1}),this.observer.observe(this.btnLoadMore))}toggleItemsVisibility(){var e=this.btnLoadMore.dataset.href;this.btnLoadMore.style.display=e?"":"none"}async loadMoreItems(){this.btnLoadMore.setAttribute("disabled","true");var t=this.btnLoadMore.dataset.href;if(t)try{var r=await(await fetch(t)).text(),i=(new DOMParser).parseFromString(r,"text/html");let e;"product"===this.gridType?e=i.querySelector("#ProductGridContainer"):"collection"===this.gridType?e=i.querySelector("#CollectionGridContainer"):"article"===this.gridType&&(e=i.querySelector("#ArticleGridContainer"));var o,s,n,a,d,c=e?e.querySelector(`#${this.gridType}-grid`):null;c?this.appendContent(c.innerHTML):console.warn(`New grid element (#${this.gridType}-grid) not found in fetched page.`),this.btnLoadMore=this.querySelector(".js-btn-load-more"),this.btnLoadMore?(n=((o=i.querySelector(".js-btn-load-more"))?(s=o.dataset.href,this.btnLoadMore.dataset.href=s):this.btnLoadMore.dataset.href="",new URL(window.location.href)),a=new URLSearchParams(n.search),d=parseInt(a.get("page"),10)||1,this.updateUrl(d+1),this.updateItemCount(),this.toggleItemsVisibility(),this.isInfinityScrollActive&&this.setupInfinityScroll()):console.error("Load More button disappeared after content append. Cannot continue.")}catch(e){console.error("Load more error:",e);let t=document.createElement("div");t.className="error-message p-4 bg-red-100 border border-red-400 text-red-700 rounded-md mt-4",t.textContent="An error occurred: "+e.message,this.btnLoadMore.after(t),setTimeout(()=>t.remove(),5e3)}finally{this.btnLoadMore.removeAttribute("disabled")}else this.btnLoadMore.removeAttribute("disabled")}}customElements.define("dynamic-load-more",i)}if(!customElements.get("dynamic-load-previous")){class C extends DynamicLoad{constructor(){super(),this.btnLoadPrevious=this.querySelector(".js-btn-load-previous"),this.setProperties(),this.checkPageParameter(),window.addEventListener("shopify:section:load",()=>{this.setProperties(),this.checkPageParameter()}),this.updateItemCount(),this.btnLoadPrevious.addEventListener("click",e=>{e.preventDefault(),this.loadPreviousItems()})}checkPageParameter(){var e=new URL(window.location.href),e=new URLSearchParams(e.search),e=parseInt(e.get("page"),10)||1;this.btnLoadPrevious.style.display=e<=1?"none":""}async loadPreviousItems(){this.btnLoadPrevious.setAttribute("disabled","true");var t=this.btnLoadPrevious.dataset.href;if(t)try{var r=await(await fetch(t)).text(),i=(new DOMParser).parseFromString(r,"text/html");let e;"product"===this.gridType?e=i.querySelector("#ProductGridContainer"):"collection"===this.gridType?e=i.querySelector("#CollectionGridContainer"):"article"===this.gridType&&(e=i.querySelector("#ArticleGridContainer"));var o,s,n,a,d,c=e?e.querySelector(`#${this.gridType}-grid`):null;c?this.appendContent(c.innerHTML,!0):console.warn(`New grid element (#${this.gridType}-grid) not found in fetched page.`),this.btnLoadPrevious=this.querySelector(".js-btn-load-previous"),this.btnLoadPrevious?(n=((o=i.querySelector(".js-btn-load-previous"))?(s=o.dataset.href,this.btnLoadPrevious.dataset.href=s):this.btnLoadPrevious.dataset.href="",new URL(window.location.href)),a=new URLSearchParams(n.search),d=parseInt(a.get("page"),10)||1,this.updateUrl(d-1),this.checkPageParameter(),this.updateItemCount()):console.error("Load Previous button disappeared after content prepend. Cannot continue.")}catch(e){console.error("Load previous error:",e);let t=document.createElement("div");t.className="error-message p-4 bg-red-100 border border-red-400 text-red-700 rounded-md mt-4",t.textContent="An error occurred: "+e.message,this.btnLoadPrevious.after(t),setTimeout(()=>t.remove(),5e3)}finally{this.btnLoadPrevious.removeAttribute("disabled")}else this.btnLoadPrevious.removeAttribute("disabled")}}customElements.define("dynamic-load-previous",C)}