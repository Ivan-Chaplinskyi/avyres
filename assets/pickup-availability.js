class t extends HTMLElement{constructor(){super(),this.hasAttribute("available")&&(this.errorHtml=this.querySelector("template").content.firstElementChild.cloneNode(!0),this.onClickRefreshList=this.onClickRefreshList.bind(this),this.fetchAvailability(this.dataset.variantId))}fetchAvailability(t){var e=this.dataset.rootUrl.endsWith("/")?this.dataset.rootUrl:this.dataset.rootUrl+"/";fetch(e+`variants/${t}/?section_id=pickup-availability`).then(t=>t.text()).then(t=>{t=(new DOMParser).parseFromString(t,"text/html").querySelector(".shopify-section"),this.renderPreview(t)}).catch(t=>{var e=this.querySelector("button");e&&e.removeEventListener("click",this.onClickRefreshList),this.renderError()})}onClickRefreshList(t){this.fetchAvailability(this.dataset.variantId)}renderError(){this.innerHTML="",this.appendChild(this.errorHtml),this.querySelector("button").addEventListener("click",this.onClickRefreshList)}renderPreview(t){t.querySelector("pickup-availability-preview")?(this.innerHTML=t.querySelector("pickup-availability-preview").outerHTML,this.setAttribute("available","")):(this.innerHTML="",this.removeAttribute("available"))}}customElements.define("pickup-availability",t);