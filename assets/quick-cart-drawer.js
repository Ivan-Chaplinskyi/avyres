if(!customElements.get("quick-cart-drawer")){class e extends HTMLElement{constructor(){super(),Shopify.designMode&&(window.addEventListener("shopify:section:load",this.init.bind(this)),this.parentElement.addEventListener("shopify:section:select",()=>this.open()),this.parentElement.addEventListener("shopify:section:deselect",()=>this.close()))}connectedCallback(){this.init()}init(){this.toggleState=!1,this.classList.contains("is--open")||document.querySelector("body").classList.remove("overflow-hidden"),this.querySelector(".button--close").addEventListener("click",this.close.bind(this)),this.querySelector(".quick-cart-drawer__backdrop").addEventListener("click",this.close.bind(this)),this.querySelector(".quick-cart-drawer__blocks").addEventListener("keydown",e=>{var t,r;"Escape"===e.key&&this.toggleState&&this.close(),this.toggleState&&(t=(r=this.querySelectorAll('button, [href], input, select, label, textarea, [tabindex]:not([tabindex="-1"])'))[0],r=r[r.length-1],"Tab"===e.key)&&(e.shiftKey?document.activeElement===t&&(e.preventDefault(),r.focus()):document.activeElement===r&&(e.preventDefault(),t.focus()))}),this.initTriggers()}initTriggers(){new MutationObserver(()=>{document.querySelectorAll(".quick-cart-drawer__trigger").forEach(e=>{e._init||(e.addEventListener("click",e=>{this.fetchProductForQuickCartDrawer(e)}),e._init=!0)})}).observe(document.body,{childList:!0,subtree:!0})}async fetchProductForQuickCartDrawer(e){e.target.closest("card-product-slider")&&(e.target.closest("card-product-slider").slider.autoplay.stop(),e.target.closest("card-product-slider").classList.add("product--open-on-quick-cart"));var t=e.target.classList.contains("quick-cart-drawer__trigger--recommendations");let r=e.target.closest("product-card"),i=null;if(!t){if(!r)return;i=r.querySelectorAll('input[type="radio"]:checked, select')}(e=e.target.closest("[data-product-url]")).classList.toggle("is--loading");try{let t="";window.Shopify.routes.root.includes(`/${window.Shopify.locale}/`)&&(t="/"+window.Shopify.locale);var c=await fetch(""+t+e.dataset.productUrl+"/?view=quick-cart");if(c){var a=await c.text();let e=document.createElement("DIV");e.insertAdjacentHTML("beforeend",a),e.querySelector(".quick-cart-product")&&(this.querySelector(".quick-cart-drawer__main").innerHTML="",this.querySelector(".quick-cart-drawer__main").append(e.querySelector(".quick-cart-product")),this.sliderInstance=new Swiper(".quick-cart-drawer__media-swiper",{slidesPerView:1.25,spaceBetween:8,freeMode:{enabled:!0},breakpoints:{750:{slidesPerView:2}}}))}}catch(t){}finally{e.classList.toggle("is--loading"),t||i.forEach(e=>{var t=this.querySelector(`[name="${e.name}"][value="${e.value}"]`),i=t.parentElement.parentElement.querySelector("legend");i.innerHTML,this.querySelectorAll(`[name="${e.name}"]`).forEach(e=>{e.removeAttribute("checked"),e.closest("li").classList.remove("checked")}),t&&(t.setAttribute("checked",""),i=i.querySelector("[data-selected-variant]"))&&(i.innerHTML=e.value),this.querySelector("product-card").querySelector('input[name="id"]').value=r.querySelector('input[name="id"]').value,t&&t.closest("li").classList.add("checked"),this.querySelector("product-card").init()}),setTimeout(()=>{this.open()},500),this.querySelector(".quick-cart-drawer__main").querySelectorAll(".variant-option-radio-input").forEach(e=>{e.addEventListener("change",e=>{var t=e.target.parentElement.parentElement.querySelector("legend").querySelector("[data-selected-variant]");t&&(t.innerHTML=e.target.value);let r=this.querySelector(".product-card__add-to-cart--form input[name='id']").value;t=this.querySelector("product-card").variantsObj.find(e=>e.id==r)?.featured_media,t&&this.setActiveMedia(t.id)})})}}setActiveMedia(e){var t=Array.from(this.querySelectorAll("[data-media-id]")).find(t=>Number(t.dataset.mediaId)===e);t&&this.sliderInstance.slideTo(Number(t.dataset.index))}toggle(){this.toggleState?this.close():this.open()}open(){this.toggleState=!0,document.querySelector("body").classList.add("overflow-hidden");var e,t=(e=document.querySelector(".quick-cart-drawer__blocks")).querySelector(".button--close");(e=(e.setAttribute("tabindex","0"),t.setAttribute("tabindex","0"),this.classList.add("is--open"),this.opened(),this.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')))&&e.focus()}close(){this.toggleState=!1;var e=document.querySelector("shop-the-look-drawer");e&&!e.classList.contains("is--open")&&document.querySelector("body").classList.remove("overflow-hidden"),e||document.querySelector("body").classList.remove("overflow-hidden"),this.classList.remove("is--open"),this.closed(),this.toggleAriaExpanded(),document.querySelector("card-product-slider.product--open-on-quick-cart")&&(document.querySelector("card-product-slider.product--open-on-quick-cart").slider.autoplay.start(),document.querySelector("card-product-slider.product--open-on-quick-cart").classList.remove("product--open-on-quick-cart"))}toggleAriaExpanded(e){e?(e.target.closest("button")&&e.target.closest("button").setAttribute("aria-expanded",!0),this.querySelector(".button--close").setAttribute("aria-expanded",!0)):document.querySelectorAll('[aria-controls="quick-cart-drawer"]').forEach(e=>{e.setAttribute("aria-expanded",!1)})}opened(){var e=new Event("opened",{bubbles:!0});this.dispatchEvent(e)}closed(){var e=new Event("closed",{bubbles:!0});this.dispatchEvent(e)}}customElements.define("quick-cart-drawer",e)}